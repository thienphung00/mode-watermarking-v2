# ConfigMap for non-sensitive configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: watermarking-config
  namespace: watermarking
  labels:
    app.kubernetes.io/name: watermarking
    app.kubernetes.io/component: config
data:
  # Environment
  ENVIRONMENT: "production"
  
  # API Configuration
  INFERENCE_MODE: "remote"
  ENABLE_DOCS: "false"
  ENABLE_METRICS: "true"
  LOG_LEVEL: "INFO"
  LOG_FORMAT: "json"
  
  # Worker Configuration
  MODEL_ID: "runwayml/stable-diffusion-v1-5"
  DEVICE: "cuda"
  USE_FP16: "true"
  MAX_CONCURRENT_REQUESTS: "4"
  MAX_QUEUE_SIZE: "16"
  GPU_SEMAPHORE_SIZE: "2"
  ENABLE_WARMUP: "true"
  
  # Rate Limiting
  RATE_LIMIT_DETECT_MAX: "50"
  RATE_LIMIT_DETECT_WINDOW: "60"
  RATE_LIMIT_EVALUATE_MAX: "20"
  RATE_LIMIT_EVALUATE_WINDOW: "60"
  
  # Artifact Paths (mounted from PVC or GCS)
  LIKELIHOOD_PARAMS_PATH: "/app/artifacts/likelihood_params.json"
  MASK_PATH: "/app/artifacts/mask.npy"
---
# ConfigMap for worker URLs (separate for easier updates)
apiVersion: v1
kind: ConfigMap
metadata:
  name: watermarking-workers
  namespace: watermarking
  labels:
    app.kubernetes.io/name: watermarking
    app.kubernetes.io/component: config
data:
  WORKER_URLS: "http://gpu-worker:8080"

